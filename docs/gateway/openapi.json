{"openapi":"3.0.0","info":{"description":"API for Smart Home GateWay","version":"1.0.0","title":"Smart Home API"},"servers":[{"url":"/smart-home"}],"tags":[{"name":"Dashboard"},{"name":"HVAC rules"},{"name":"Notifications"}],"paths":{"/dashboard":{"get":{"summary":"Returns all data about home","tags":["Dashboard"],"responses":{"200":{"description":"System status and information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Dashboard"}}}}}}},"/rules/hvac":{"get":{"summary":"Returns HVAC rules configurations","tags":["HVAC rules"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/HVACRule"}}}}}}},"post":{"summary":"Creates a room HVAC configuration and returns its ID","tags":["HVAC rules"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HVACRule"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"$ref":"#/components/schemas/HVACRule/properties/id"}}}}}},"400":{"description":"bad request"}}}},"/rules/hvac/{id}":{"get":{"summary":"Returns HVAC rule configuration","tags":["HVAC rules"],"parameters":[{"$ref":"#/components/parameters/id32"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HVACRule"}}}},"404":{"description":"Not found"}}},"put":{"summary":"Creates or updates a HVAC rule configuration with given ID","tags":["HVAC rules"],"parameters":[{"$ref":"#/components/parameters/id32"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HVACRule"}}}},"responses":{"200":{"description":"OK"},"400":{"description":"bad request"},"404":{"description":"Not found"}}},"delete":{"summary":"Deletes a HVAC rule configuration with a given ID","tags":["HVAC rules"],"parameters":[{"$ref":"#/components/parameters/id32"}],"responses":{"200":{"description":"OK"},"404":{"description":"Not found"}}}},"/notifications":{"get":{"summary":"Returns notification list","tags":["Notifications"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Notification"}}}}}}}},"/notifications/{id}":{"delete":{"summary":"Deletes notification with given ID","tags":["Notifications"],"parameters":[{"$ref":"#/components/parameters/id64"}],"responses":{"200":{"description":"OK"}}}}},"components":{"parameters":{"id32":{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}},"id64":{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}},"schemas":{"Dashboard":{"$id":"dashboard.json","title":"Dashboard","type":"object","description":"System information","properties":{"temperatureSensors":{"type":"array","items":{"$ref":"#/components/schemas/TemperatureSensor"}},"windowSensors":{"type":"array","items":{"$ref":"#/components/schemas/WindowSensor"}},"windowBlinds":{"type":"array","items":{"$ref":"#/components/schemas/WindowBlind"}},"RFIDSensors":{"type":"array","items":{"$ref":"#/components/schemas/RFIDSensor"}},"smokeSensors":{"type":"array","items":{"$ref":"#/components/schemas/SmokeSensor"}},"HVACStatus":{"$ref":"#/components/schemas/HVACStatus"}}},"WindowSensor":{"$id":"window-sensor.json","title":"Window Sensor","type":"object","description":"Window Sensor data","required":["id","type","status"],"properties":{"id":{"type":"integer","format":"int32","description":"Sensor ID"},"type":{"type":"string","const":"windowSensor"},"status":{"type":"string","description":"status of the window sensor","enum":["open","closed"]}}},"WindowBlind":{"$id":"window-blind.json","title":"Window Blind","type":"object","description":"Window Blind data","required":["id","type","position"],"properties":{"id":{"type":"integer","format":"int32","description":"Blind ID"},"type":{"type":"string","const":"windowBlind"},"position":{"type":"integer","format":"int32","description":"position of the window blind, 100 is fully open, 0 is fully closed","min":0,"max":100}}},"TemperatureSensor":{"$id":"temperature-sensor.json","title":"Temperature Sensor","type":"object","description":"Temperature Sensor data","required":["id","type","value"],"properties":{"id":{"type":"integer","format":"int32","description":"Sensor ID"},"type":{"type":"string","const":"temperatureSensor"},"value":{"type":"integer","format":"int32","description":"In tens of degrees of Celsius"}}},"RFIDSensor":{"$id":"rfid-sensor.json","title":"RFID Sensor","type":"object","description":"RFID Sensor data","required":["id","type"],"properties":{"id":{"type":"integer","format":"int32","description":"Sensor ID"},"type":{"type":"string","const":"RFIDSensor"},"lastTag":{"$id":"rfid-tag.json","title":"RFID Tag","type":"object","description":"RFID Tag data","required":["id","type","timestamp"],"properties":{"id":{"type":"integer","format":"int64","description":"Tag ID"},"type":{"type":"string","const":"RFIDTag"},"timestamp":{"type":"integer","format":"int64","description":"Unix epoch time"}}}}},"SmokeSensor":{"$id":"smoke-sensor.json","title":"Smoke Sensor","type":"object","description":"Smoke Sensor data","required":["id","type","isSmokeDetected"],"properties":{"id":{"type":"integer","format":"int32","description":"Sensor ID"},"type":{"type":"string","const":"smokeSensor"},"isSmokeDetected":{"type":"boolean","description":"Flag indicating if the smoke sensor detected smoke"}}},"HVACStatus":{"$id":"hvac-status.json","title":"Hvac status","type":"object","description":"hvac status data","required":["status"],"properties":{"status":{"type":"string","enum":["heating","cooling","heaterOverheat","coolerOverheat"]}}},"HVACRule":{"$id":"hvac-rule.json","title":"HVAC rule","type":"object","description":"HVAC rule configuration","required":["temperature","hysteresis","temperatureSensorId","windowSensorIds"],"properties":{"id":{"type":"integer","format":"int32","description":"rule ID"},"temperature":{"type":"integer","format":"int32","description":"In tens of degrees of Celsius"},"hysteresis":{"type":"integer","format":"int32","description":"In tens of degrees of Celsius"},"temperatureSensorId":{"$ref":"#/components/schemas/WindowSensor/properties/id"},"windowSensorIds":{"type":"array","description":"Opened window sensor ID-s that disable HVAC for that room","items":{"$ref":"#/components/schemas/WindowSensor/properties/id"}}}},"Notification":{"$id":"notification.json","title":"Notification","type":"object","description":"Notification data","required":["id","type","timestamp","sensorId"],"properties":{"id":{"type":"integer","format":"int64","description":"Notification ID"},"timestamp":{"type":"integer","format":"int64","description":"Unix epoch time"},"type":{"type":"string","enum":["alert","doorbell","hvac","windowSensor","RFIDSensor"]},"sensorId":{"type":"integer","format":"int64"}}}}}}