{"openapi":"3.0.0","info":{"description":"API for Smart Home GateWay","version":"1.0.0","title":"Smart Home API"},"servers":[{"url":"/smart-home"}],"tags":[{"name":"Dashboard"},{"name":"Configuration"},{"name":"Notifications"}],"paths":{"/dashboard":{"get":{"summary":"Returns all data about home","tags":["Dashboard"],"responses":{"200":{"description":"System status and information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Dashboard"}}}}}}},"/hvac":{"put":{"summary":"Updates a HVAC room configuration","tags":["Configuration"],"parameters":[{"$ref":"#/components/parameters/id32"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HVACRoom"}}}},"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"404":{"description":"Not found"}}}},"/blinds":{"put":{"summary":"Sets Window blinds to given state.","tags":["Configuration"],"parameters":[{"$ref":"#/components/parameters/id32"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WindowBlind"}}}},"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"404":{"description":"Not found"}}}},"/light":{"put":{"summary":"Sets light to given color.","tags":["Configuration"],"parameters":[{"$ref":"#/components/parameters/id32"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Light"}}}},"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"404":{"description":"Not found"}}}},"/notifications":{"get":{"summary":"Returns notification list","tags":["Notifications"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Notification"}}}}}}}},"/notifications/{id}":{"delete":{"summary":"Deletes notification with given ID","tags":["Notifications"],"parameters":[{"$ref":"#/components/parameters/id64"}],"responses":{"200":{"description":"OK"}}}}},"components":{"parameters":{"id32":{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}},"id64":{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}},"schemas":{"Dashboard":{"$id":"dashboard.json","title":"Dashboard","type":"object","description":"System information","properties":{"temperatureSensors":{"type":"array","items":{"$ref":"#/components/schemas/TemperatureSensor"}},"windowSensors":{"type":"array","items":{"$ref":"#/components/schemas/WindowSensor"}},"windowBlinds":{"type":"array","items":{"$ref":"#/components/schemas/WindowBlind"}},"RFIDSensors":{"type":"array","items":{"$ref":"#/components/schemas/RFIDSensor"}},"smokeSensors":{"type":"array","items":{"$ref":"#/components/schemas/SmokeSensor"}},"HVACStatus":{"$ref":"#/components/schemas/HVACStatus"},"HVACRooms":{"type":"array","items":{"$ref":"#/components/schemas/HVACRoom"}},"lights":{"type":"array","items":{"$ref":"#/components/schemas/Light"}}}},"WindowSensor":{"$id":"window-sensor.json","title":"Window Sensor","type":"object","description":"Window Sensor data","required":["id","type","status"],"properties":{"id":{"type":"integer","format":"int32","description":"Sensor ID"},"type":{"type":"string","const":"windowSensor"},"status":{"type":"string","description":"status of the window sensor","enum":["open","closed"]}}},"WindowBlind":{"$id":"window-blind.json","title":"Window Blind","type":"object","description":"Window Blind data","required":["id","type","position"],"properties":{"id":{"type":"integer","format":"int32","description":"Blind ID"},"type":{"type":"string","const":"windowBlind"},"position":{"type":"integer","format":"int32","description":"position of the window blind, 100 is fully open, 0 is fully closed","minimum":0,"maximum":100}}},"TemperatureSensor":{"$id":"temperature-sensor.json","title":"Temperature Sensor","type":"object","description":"Temperature Sensor data","required":["id","type","value"],"properties":{"id":{"type":"integer","format":"int32","description":"Sensor ID"},"type":{"type":"string","const":"temperatureSensor"},"value":{"type":"integer","format":"int32","description":"In tens of degrees of Celsius"}}},"RFIDSensor":{"$id":"rfid-sensor.json","title":"RFID Sensor","type":"object","description":"RFID Sensor data","required":["id","type"],"properties":{"id":{"type":"integer","format":"int32","description":"Sensor ID"},"type":{"type":"string","const":"RFIDSensor"},"lastTag":{"$id":"rfid-tag.json","title":"RFID Tag","type":"object","description":"RFID Tag data","required":["id","type","timestamp"],"properties":{"id":{"type":"integer","format":"int64","description":"Tag ID"},"type":{"type":"string","const":"RFIDTag"},"timestamp":{"type":"integer","format":"int64","description":"Unix epoch time"}}}}},"SmokeSensor":{"$id":"smoke-sensor.json","title":"Smoke Sensor","type":"object","description":"Smoke Sensor data","required":["id","type","isSmokeDetected"],"properties":{"id":{"type":"integer","format":"int32","description":"Sensor ID"},"type":{"type":"string","const":"smokeSensor"},"isSmokeDetected":{"type":"boolean","description":"Flag indicating if the smoke sensor detected smoke"}}},"HVACStatus":{"$id":"hvac-status.json","title":"Hvac status","type":"object","description":"hvac status data","required":["type","heating","cooling"],"properties":{"type":{"type":"string","const":"HVACStatus"},"heating":{"type":"boolean"},"cooling":{"type":"boolean"}}},"HVACRoom":{"$id":"hvac-room.json","title":"HVAC Room","type":"object","description":"HVAC room configuration","required":["id","type"],"properties":{"id":{"type":"integer","format":"int32","description":"rule ID"},"type":{"type":"string","const":"HVACRoom"},"heating-temperature":{"type":"integer","format":"int32","minimum":50,"maximum":300,"description":"In tens of degrees of Celsius. Must be lower at least by hysteresis than cooling temperature. Minimum value of 5 °C as we don't want to have frozen pipes"},"cooling-temperature":{"type":"integer","format":"int32","minimum":100,"maximum":400,"description":"In tens of degrees of Celsius. Must be higher at least by hysteresis than heating temperature. Let's protect people against sunstroke"},"hysteresis":{"type":"integer","format":"int32","minimum":5,"maximum":20,"description":"In tens of degrees of Celsius. Having no hysteresis at all is dangerous - 0.5 °C seems to be a reasonable minimum"},"temperatureSensorId":{"$ref":"#/components/schemas/TemperatureSensor/properties/id"},"windowSensorIds":{"type":"array","description":"Opened window sensor ID-s that disable HVAC for that room","items":{"$ref":"#/components/schemas/WindowSensor/properties/id"}}}},"Light":{"$id":"light.json","title":"Light","type":"object","description":"House RGB light","required":["id","type"],"properties":{"id":{"type":"integer","format":"int32","description":"Light ID"},"type":{"type":"string","const":"RGBLight"},"hue":{"type":"integer","format":"int32","minimum":0,"maximum":359},"saturation":{"type":"integer","format":"int32","minimum":0,"maximum":100},"value":{"type":"integer","format":"int32","minimum":0,"maximum":100}}},"Notification":{"$id":"notification.json","title":"Notification","type":"object","description":"Notification data","required":["id","type","timestamp","sensorId"],"properties":{"id":{"type":"integer","format":"int64","description":"Notification ID"},"timestamp":{"type":"integer","format":"int64","description":"Unix epoch time"},"type":{"type":"string","enum":["alert","doorbell","hvac","windowSensor","RFIDSensor"]},"sensorId":{"type":"integer","format":"int64"}}}}}}